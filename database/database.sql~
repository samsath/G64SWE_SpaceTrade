use g64swegroup2;

DROP TABLE IF EXISTS PlanetResources;
DROP TABLE IF EXISTS ShipResource;
DROP TABLE IF EXISTS ResourcesMedia;
DROP TABLE IF EXISTS ShipMedia;
DROP TABLE IF EXISTS PlanetMedia;
DROP TABLE IF EXISTS Ship;
DROP TABLE IF EXISTS User;
DROP TABLE IF EXISTS Resources;
DROP TABLE IF EXISTS Planet;
DROP TABLE IF EXISTS Media;


CREATE TABLE User (
	User_ID INT NOT NULL AUTO_INCREMENT,
	Name VARCHAR(255) NOT NULL,
	Highscore INT,
	Money INT,
	CONSTRAINT pk_User PRIMARY KEY (User_ID)
)ENGINE = InnoDB;

CREATE TABLE Ship (
	Ship_ID INT NOT NULL AUTO_INCREMENT,
	Model INT,
	Ammo_Level INT,
	Health_Level INT,
	Cargo_Level INT,
	Fuel_Level INT,
	Owner INT,
	Extenstions VARCHAR(255),
	CONSTRAINT pk_Ship PRIMARY KEY (Ship_ID),
	CONSTRAINT fk_ship_user FOREIGN KEY (Owner) REFERENCES User (User_ID)
)ENGINE = InnoDB;

CREATE TABLE Resources (
	Resources_ID INT NOT NULL AUTO_INCREMENT,
	Name VARCHAR(255) NOT NULL,
	Initial_Price INT,
	Description VARCHAR(255),
	CONSTRAINT pk_Resources PRIMARY KEY (Resources_ID)
)ENGINE = InnoDB;

CREATE TABLE Planet (
	Planet_ID INT NOT NULL AUTO_INCREMENT,
	Title VARCHAR(255),
	X_loc INT,
	Y_loc INT,
	Diameter INT,
	CONSTRAINT pk_Planet PRIMARY KEY(Planet_ID)
)ENGINE = InnoDB;

CREATE TABLE Media (
	Media_ID INT NOT NULL AUTO_INCREMENT,
	X_size INT,
	Y_size INT,
	length INT,
	file_Loc VARCHAR(255),
	Media_type INT,
	CONSTRAINT pk_Media PRIMARY KEY (Media_ID)
)ENGINE = InnoDB;

CREATE TABLE PlanetResources (
	PR_ID INT NOT NULL AUTO_INCREMENT,
	Planet_ID INT,
	Resources_ID INT,
	Price INT,
	CONSTRAINT pk_PR PRIMARY KEY (PR_ID),
	CONSTRAINT fk_PR_Pl FOREIGN KEY (Planet_ID) REFERENCES Planet (Planet_ID),
	CONSTRAINT fk_PR_RS FOREIGN KEY (Resources_ID) REFERENCES Resources (Resources_ID)
)ENGINE = InnoDB;

CREATE TABLE ShipResource (
	SR_ID INT NOT NULL AUTO_INCREMENT,
	Ship_ID INT,
	Resources_ID INT,
	Amount INT,
	Bought_Price INT,
	CONSTRAINT pk_SR PRIMARY KEY (SR_ID),
	CONSTRAINT fk_SR_Sh FOREIGN KEY (Ship_ID) REFERENCES Ship (Ship_ID),
	CONSTRAINT fk_SR_Rs FOREIGN KEY (Resources_ID) REFERENCES Resources (Resources_ID)
)ENGINE = InnoDB;

CREATE TABLE ResourcesMedia (
	RM_ID INT NOT NULL AUTO_INCREMENT,
	Resources_ID INT,
	Media_ID INT,
	CONSTRAINT pk_RM PRIMARY KEY (RM_ID),
	CONSTRAINT fk_RM_R FOREIGN KEY (Resources_ID) REFERENCES Resources (Resources_ID),
	CONSTRAINT fk_RM_M FOREIGN KEY (Media_ID) REFERENCES Media (Media_ID)
)ENGINE = InnoDB;

CREATE TABLE ShipMedia (
	SM_ID INT NOT NULL AUTO_INCREMENT,
	Ship_ID INT,
	Media_ID INT,
	Reason INT,
	CONSTRAINT pk_SM PRIMARY KEY (SM_ID),
	CONSTRAINT fk_SM_R FOREIGN KEY (Ship_ID) REFERENCES Ship (Ship_ID),
	CONSTRAINT fk_SM_M FOREIGN KEY (Media_ID) REFERENCES Media (Media_ID)
)ENGINE = InnoDB;

CREATE TABLE PlanetMedia (
	PM_ID INT NOT NULL AUTO_INCREMENT,
	Planet_ID INT,
	Media_ID INT,
	CONSTRAINT pk_PM PRIMARY KEY (PM_ID),
	CONSTRAINT fk_PM_R FOREIGN KEY (Planet_ID) REFERENCES Planet (Planet_ID),
	CONSTRAINT fk_PM_M FOREIGN KEY (Media_ID) REFERENCES Media (Media_ID)
)ENGINE = InnoDB;
